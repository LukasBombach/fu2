<% unread = @last_read_id && post.id > @last_read_id %>
<% mention = post.mentions?(current_user) %>
<a name="post_<%= post.id %>"></a>
<div class="post<%= ' unread' if unread %><%= ' mention' if mention %>" data-post-id="<%= post.id %>">
  <div class="post-header">
    <div class="post-actions">
      <% faves = post.faves.to_a %>
      <span class="faves<%= ' active' if post.faved_by?(current_user, faves) %>">
        <%= octicon "star" %>
        <span class="count"><%= faves.size %></span>
      </span>

      <span class="date">
        <%= post.created_at.try(:strftime, Fu2.time_format) %>
      </span>
    </div>

    <%= render :partial => "shared/user", object: post.user, locals: {size: 32} %>
  </div>
  <div class="body" data-raw-body="<%= u(post.body) %>">
    <div class="post-options">
      <%= link_to octicon("pencil") %>
      <%= link_to octicon("mail-reply") %>
      <%= link_to octicon("flame") %>
    </div>

    <%= format_body post %>
  </div>
</div>
