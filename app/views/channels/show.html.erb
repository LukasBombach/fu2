<% if @channel.can_read?(current_user) %>
  <h1><%= @channel.title %></h1>
  <div class="text">
    <div class="body">
      <%= format_text @channel.text %>
    </div>
  </div>

  <div class="channel-posts">
    <div class="loader-group">
      <% @view.posts.each do |post| %>
        <% if post.is_a?(Event) %>
          <%= render partial: "event", object: post %>
        <% elsif post.can_read?(current_user) %>
          <%= render partial: "post", object: post %>
        <% end %>
      <% end %>
    </div>
  </div>

<% else %>
  <p>You can't read the content of this channel</p>
<% end %>

<% if @channel.can_write?(current_user) %>
  <div class="channel-response">
    <a name="comments"></a>
    <%= render partial: "form", locals: {form: [:post, :url => channel_posts_path(@channel)]} %>
  </div>
<% end %>
